{"version":3,"sources":["components/Blog.js","services/blogs.js","services/login.js","components/Notification.js","App.js","index.js"],"names":["Blog","_ref","blog","react_default","a","createElement","title","author","token","services_blogs","getAll","axios","get","then","response","data","create","Object","asyncToGenerator","regenerator_default","mark","_callee","newObject","config","wrap","_context","prev","next","headers","Authorization","post","sent","abrupt","stop","this","_x","apply","arguments","update","id","put","concat","setToken","newToken","services_login","login","credentials","Notification","message","error","className","App","_useState","useState","_useState2","slicedToArray","blogs","setBlogs","_useState3","_useState4","username","setUsername","_useState5","_useState6","password","setPassword","_useState7","_useState8","user","setUser","_useState9","_useState10","errorMessage","setErrorMessage","_useState11","_useState12","notifMessage","setNotifMessage","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","JSON","parse","handleLogin","event","_user2","preventDefault","loginService","setItem","stringify","t0","setTimeout","components_Notification","onSubmit","type","value","name","onChange","_ref2","target","_ref3","onClick","removeItem","map","components_Blog","key","ReactDOM","render","src_App","document","getElementById"],"mappings":"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","file":"static/js/main.bdaade34.chunk.js","sourcesContent":["import React from 'react'\nconst Blog = ({ blog }) => (\n  <div>\n    {blog.title} {blog.author}\n  </div>\n)\n\nexport default Blog","\nimport axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = null\n\nconst setToken = newToken => {\n  token = `bearer ${newToken}`\n}\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\nconst create = async newObject => {\n  const config = {\n    headers: { Authorization: token },\n  }\n\n  const response = await axios.post(baseUrl, newObject, config)\n  return response.data\n}\n\nconst update = (id, newObject) => {\n  const request = axios.put(`${ baseUrl } /${id}`, newObject)\n  return request.then(response => response.data)\n}\n\nexport default { getAll, create, update, setToken }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const response = await axios.post(baseUrl, credentials)\n  return response.data\n}\n\nexport default { login }","import React from 'react'\n\nconst Notification = ({ message, error }) => {\n  if (message === null) {\n    return null\n  }\n  if (error) {\n      return (\n        <div className=\"error\">\n        {message}\n        </div>\n      )\n  }\n  return (\n    <div className=\"notification\">\n      {message}\n    </div>\n  )\n}\n\nexport default Notification","import React, { useState, useEffect } from 'react'\nimport Blog from './components/Blog'\nimport blogService from './services/blogs'\nimport loginService from './services/login'\nimport Notification from './components/Notification'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState('') \n  const [password, setPassword] = useState('')\n  const [user, setUser] = useState(null) \n  const [errorMessage, setErrorMessage] = useState(null)\n  const [notifMessage, setNotifMessage] = useState(null)\n\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )  \n  }, [])\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedNoteappUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUser(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n  const handleLogin = async (event) => {\n    event.preventDefault()\n    try {\n      const user = await loginService.login({\n        username, password,\n      })\n      window.localStorage.setItem(\n        'loggedNoteappUser', JSON.stringify(user)\n      ) \n      blogService.setUser(user.token)\n      setUser(user)\n      setUsername('')\n      setPassword('')\n    } catch (exception) {\n      setErrorMessage('käyttäjätunnus tai salasana virheellinen')\n      setTimeout(() => {\n        setErrorMessage(null)\n      }, 5000)\n    }\n  }\n  const handleLogout = () => {\n    window.localStorage.removeItem('loggedBlogappUser')\n    setUser(null)\n    setUsername('')\n    setPassword('')\n    \n    setNotifMessage('Uloskirjautuminen onnistui')\n    setTimeout(() => {\n      setNotifMessage(null)\n    }, 5000)\n  }\n  \n  const loginForm = () => (\n    <form onSubmit={handleLogin}>\n      <div>\n        käyttäjätunnus\n          <input\n          type=\"text\"\n          value={username}\n          name=\"Username\"\n          onChange={({ target }) => setUsername(target.value)}\n        />\n      </div>\n      <div>\n        salasana\n          <input\n          type=\"password\"\n          value={password}\n          name=\"Password\"\n          onChange={({ target }) => setPassword(target.value)}\n        />\n      </div>\n      <button type=\"submit\">kirjaudu</button>\n    </form>      \n  )\n\n  return (\n    <div>\n      <h2> kirjaudu </h2>\n      <Notification message={errorMessage} error={true} />\n      <Notification message={notifMessage} error={false} />\n      { user === null ? loginForm() :\n      <div>\n        <p>{user.name} logged in</p>\n        <button onClick={() => handleLogout()}>logout</button>\n        {blogs.map(blog =>\n        <Blog key={blog.id} blog={blog} />\n      )}\n      </div>\n      }\n      <h2>blogs</h2>\n      {blogs.map(blog =>\n        <Blog key={blog.id} blog={blog} />\n      )}\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}